# ============================================
# VIKTORIA WERTHEIM - ENVIRONMENT CONFIGURATION
# ============================================
#
# Kopiere diese Datei zu .env (lokal) oder .env.production (VPS)
# und f端lle die Werte aus.
#
# NIEMALS .env oder .env.production in Git committen!
#
# ============================================

# --------------------------------------------
# CORE SECRETS (PFLICHT - SICHER GENERIEREN!)
# --------------------------------------------

# PostgreSQL Passwort (min. 20 Zeichen, komplex)
POSTGRES_PASSWORD=your-secure-postgres-password-here

# JWT Secret f端r Token-Signierung (min. 32 Zeichen)
# Generieren mit: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters

# Supabase Keys (mit JWT_SECRET generieren)
# Tool: https://supabase.com/docs/guides/self-hosting#api-keys
ANON_KEY=your-anon-key-here
SERVICE_ROLE_KEY=your-service-role-key-here

# Dashboard Zugang (Kong Admin)
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=your-secure-dashboard-password

# --------------------------------------------
# DEPLOYMENT KONFIGURATION
# --------------------------------------------

# Environment (development | production)
NODE_ENV=development

# Restart Policy (unless-stopped | always | on-failure)
RESTART_POLICY=unless-stopped

# Container Namen Prefix (optional)
DB_CONTAINER=supabase-db
KONG_CONTAINER=supabase-kong
WEB_CONTAINER=viktoria-web

# --------------------------------------------
# NETZWERK & PORTS
# --------------------------------------------

# PostgreSQL
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=postgres

# Kong API Gateway  
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

# Studio (Development)
STUDIO_PORT=54323

# Web App (Production)
WEB_PORT=8001

# --------------------------------------------
# URLS & DOMAINS
# --------------------------------------------

# Lokale Entwicklung
API_EXTERNAL_URL=http://localhost:8000
SITE_URL=http://localhost:3000
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_SUPABASE_URL=http://localhost:8000

# Production (anpassen!)
# API_EXTERNAL_URL=https://api.viktoria-wertheim.de
# SITE_URL=https://viktoria-wertheim.de
# NEXT_PUBLIC_APP_URL=https://viktoria-wertheim.de
# NEXT_PUBLIC_SUPABASE_URL=https://api.viktoria-wertheim.de

# --------------------------------------------
# EMAIL KONFIGURATION (Kontaktformular)
# --------------------------------------------

# Admin E-Mails (Komma-getrennt)
ADMIN_EMAILS=admin@viktoria-wertheim.de

# SMTP f端r Auth E-Mails (optional)
SMTP_ADMIN_EMAIL=noreply@viktoria-wertheim.de
SMTP_HOST=mail.viktoria-wertheim.de
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_SENDER_NAME=SV Viktoria Wertheim

# Nodemailer f端r Kontaktformular
EMAIL_USER=
EMAIL_PASS=

# --------------------------------------------
# SUPABASE KONFIGURATION
# --------------------------------------------

# JWT
JWT_EXPIRY=3600

# Auth
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=false
DISABLE_SIGNUP=false
ENABLE_ANONYMOUS_USERS=false
ENABLE_PHONE_SIGNUP=false
ENABLE_PHONE_AUTOCONFIRM=false

# Storage
FILE_SIZE_LIMIT=52428800  # 50MB
IMGPROXY_ENABLE_WEBP_DETECTION=true

# Functions
FUNCTIONS_VERIFY_JWT=false

# Database Schemas
PGRST_DB_SCHEMAS=public,storage,graphql_public

# Mailer Paths
MAILER_URLPATHS_INVITE=/auth/v1/verify
MAILER_URLPATHS_CONFIRMATION=/auth/v1/verify
MAILER_URLPATHS_RECOVERY=/auth/v1/verify
MAILER_URLPATHS_EMAIL_CHANGE=/auth/v1/verify
ADDITIONAL_REDIRECT_URLS=

# --------------------------------------------
# STUDIO KONFIGURATION (Development)
# --------------------------------------------

STUDIO_DEFAULT_ORGANIZATION=SV Viktoria Wertheim
STUDIO_DEFAULT_PROJECT=viktoria-wertheim
ENABLE_LOGS=true

# --------------------------------------------
# ERWEITERTE KONFIGURATION (optional)
# --------------------------------------------

# Analytics (optional - kann leer bleiben)
LOGFLARE_PRIVATE_ACCESS_TOKEN=
LOGFLARE_PUBLIC_ACCESS_TOKEN=

# Pooler (optional)
POOLER_DEFAULT_POOL_SIZE=25
POOLER_MAX_CLIENT_CONN=100
POOLER_PROXY_PORT_TRANSACTION=5435
POOLER_DB_POOL_SIZE=20
POOLER_TENANT_ID=viktoria

# Security Keys (optional - werden generiert wenn leer)
SECRET_KEY_BASE=
VAULT_ENC_KEY=

# Kong Buffer Sizes (Production)
KONG_BUFFER_SIZE=160k
KONG_BUFFERS=64 160k

# Docker
DOCKER_SOCKET_LOCATION=/var/run/docker.sock

# --------------------------------------------
# PROFILE VERWENDUNG
# --------------------------------------------
#
# docker-compose --profile dev up -d    # Lokal: Supabase + Studio
# docker-compose --profile prod up -d   # Production: Supabase + Web App
# docker-compose --profile all up -d    # Alles (Test-Zwecke)
#
# --------------------------------------------